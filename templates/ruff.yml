spec:
    inputs:
        stage:
            description: "The stage of the job."
            default: test
        project path:
            description: "The path to the project root directory."
            default: '.'
        ruff version:
            description: "The version of ruff to be use."
            default: 'latest'

---
ruff:
    variables:
        PROJECT_PATH: $[[ inputs.project path ]]
        RUFF_VERSION: $[[ inputs.ruff version ]]
        RUFF_CHECK_OPTIONS: ""
        RUFF_FORMAT_OPTIONS: "--check"
    image: swepy/ruff:$RUFF_VERSION
    stage: $[[ inputs.stage ]]
    before_script:
        - cd $PROJECT_PATH
    script:
        - ruff check $RUFF_CHECK_OPTIONS
        - ruff format $RUFF_FORMAT_OPTIONS
